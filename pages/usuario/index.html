<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="../../style.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <title>Vendas Now</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <script>

        $(document).ready(function(){
            var uri = 'http://localhost:3000/user/';

            fetch(uri, {method: 'GET', mode: 'cors', redirect: 'follow'})
            .then(response => response.text())
            .then(result => {
                criarTabela(result);
            })
            .catch(error => console.log('error', error));   
        });

        function criarTabela(data){
            var container = $('#my-container'),
            table = $('<table>').addClass('table');
            var tr_head = $('<tr>');
            tr_head.append('<th>' + 'Nome' + '</th>');
            tr_head.append('<th>' + 'Função' + '</th>');
            tr_head.append('<th>' + 'Código' + '</th>');
            tr_head.append('<th>' + 'Email' + '</th>');
            tr_head.append('<th>' + 'Ações' + '</th>');
            table.append(tr_head);

            var array = JSON.parse(data);
            array.forEach(function(user) {
                var tr = $('<tr>');
                [ 'nome', 'tipo', '_id', 'email'].forEach(function(attr) {
                    tr.append('<td>' + user[attr] + '</td>');
                });
                tr.append(
                    '<td>' + 
                        '<a rel="lightbox" title="Imagem 6">' +
                            '<img src="../../imagens/icones/user-friends-solid.svg" width="20" height="20" alt="" title="Cadastrar" /></a>' +
                        '<a rel="lightbox" title="Imagem 6">' +
                            '<img src="../../imagens/icones/edit-solid.svg" width="20" height="20" alt="" title="Editar" /></a>' +
                        '<a rel="lightbox" title="Imagem 6">' +
                            '<img src="../../imagens/icones/list-solid.svg" width="20" height="20" alt="" title="Listar" /></a>' +
                        '<a rel="lightbox" title="Imagem 6">' +
                            '<img src="../../imagens/icones/trash-solid.svg" width="20" height="20" alt="" title="Excluir" /></a>' + 
                    '</td>'
                );      
                table.append(tr);
            });

            container.append(table);
        }
    
    </script>
</head>
<body>
    <div>
        <div class="row header">
            <nav class="gn-menu-wrapper">
                <div class="gn-scroller">
                    <ul class="gn-menu">
                        <div id="usuario-status">
                            <h4 class="link-titulo">Usuário: Admin</h4>
                        </div>
                        <h3 class="link-titulo">
                            <a href="../../imagens/icones/image 9.png" rel="lightbox" title="Imagem 6">
                                <img src="../../imagens/icones/image 9.png" width="30" height="30" alt="" title="Home"/></a>
                            Home
                        </h3><br/>                
                        <h3 class="link-titulo">
                            <a href="../../imagens/icones/image 10.png" rel="lightbox" title="Imagem 6">
                                <img src="../../imagens/icones/image 10.png" width="30" height="30" alt="" title="Usuario"/></a>
                            Usuário
                        </h3>
                        <ul class="box">
                            <li><a href="#">Lista de Usuários</a></li>
                        </ul>                
                        <h3 class="link-titulo">
                            <a href="../../imagens/icones/image 11.png" rel="lightbox" title="Imagem 6">
                                <img src="../../imagens/icones/image 11.png" width="30" height="30" alt="" title="Usuario"/></a>
                            Vendas
                        </h3>
                        <ul class="box">					
                            <li><a href="#">Lista de Vendas</a></li> 			
                            <li><a href="#">Cadastro de Vendas</a></li> 			
                        </ul>                    
                        <h3 class="link-titulo">
                            <a href="../../imagens/icones/image 12.png" rel="lightbox" title="Imagem 6">
                                <img src="../../imagens/icones/image 12.png" width="30" height="30" alt="" title="Usuario"/></a>
                            Estoque
                        </h3>
                        <ul class="box">
                            <li><a href="#">Lista de Estoque</a></li>
                            <li><a href="#">Cadastro de Produtos</a></li>
                        </ul>   
                        <h3 class="link-titulo">
                            <a href="../../imagens/icones/image 13.png" rel="lightbox" title="Imagem 6">
                                <img src="../../imagens/icones/image 13.png" width="30" height="30" alt="" title="Usuario"/></a>
                            Meu Perfil
                        </h3>             
                    </ul>
                </div>
            </nav>
            <div class="col-5">
                <a href="#home" id="title">VENDAS NOW</a>
            </div>
            <div class="col-5">
                <a href="#home" id="title-desc">Sobre a Loja</a>
            </div>
            <div class="col-1">
                <button class="button-header">Sair</button>
            </div>
        </div>
        <div class="container">
            <div id="conteudo">
                <div class="container-header">
                    <h5><b>Lista de Usuários</b></h5>
                </div>
                <div class="container-descricao">
                    <label>Os usuários relacionados representam todos os cadastros do sistema</label>       
                </div>

                <div id="my-container">
                </div>
                
                <div class="pagination">
                    <ul class="pagination" >
                        <li><a href="#">«</a></li>
                        <li><a href="#">1</a></li>
                        <li><a class="active" href="#">2</a></li>
                        <li><a href="#">3</a></li>
                        <li><a href="#">4</a></li>
                        <li><a href="#">»</a></li>
                    </ul>
                </div>
            </div>

        </div>
        <hr class="line" />
        <div>
            <h6>Projeto desenvolvido pela equipe Azul na disciplina de Desenvolvimento Web - UFC</h6>
        </div>
        <div class="row"> 
            <div class="col-4">

            </div>
            <div class="col-2">
                <h4>Contato</h4>
            </div>
            <div class="col-2">
                <h4>Suporte</h4>
            </div>
            <div class="col-4"></div>
        </div>
</div>
</body>
</html>